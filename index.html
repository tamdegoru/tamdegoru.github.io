<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="
    default-src 'self'; 
    script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com; 
    style-src 'self' 'unsafe-inline'; 
    img-src 'self' data:;
    connect-src 'self' https://unpkg.com;
">
    <title>Home</title>
    <link rel="icon" href="images/logohata.png" type="image/x-icon">
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>

    <!-- Головний CSS -->
    <link rel="stylesheet" href="css/index.css">
</head>
<body>

<!-- HEADER -->
<div 
    hx-get="partials/global.header.html"
    hx-trigger="load"
    hx-swap="outerHTML">
</div>

    <div 
    hx-get="partials/galery.galery.html"
    hx-trigger="load"
    hx-swap="outerHTML">
</div>
    
<!-- Підвантаження футера -->
<div 
    hx-get="partials/global.footer.html"
    hx-trigger="load"
    hx-swap="outerHTML">
</div>

<!-- JS -->

<script >
const partials = document.querySelectorAll('[hx-trigger="load"], [data-hx-trigger="load"]');
const totalPartials = partials.length;
let processedCount = 0;

// Створюємо Set, щоб не рахувати один і той самий елемент двічі
const processedElements = new Set();

document.body.addEventListener("htmx:afterSettle", (event) => {
    const target = event.target;

    // Перевіряємо, чи цей елемент — один із наших паршалів і чи ми його ще не рахували
    if (target.hasAttribute('hx-get') && !processedElements.has(target)) {
        processedElements.add(target);
        processedCount++;
        
        console.log(`(index): Завантажено ${processedCount} з ${totalPartials}`);

        if (processedCount >= totalPartials) {
            init(); // Ваша функція з import("./js/global.footer.js")
        }
    }
});
</script>
    

</body>
</html>























